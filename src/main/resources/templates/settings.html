<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <link rel="stylesheet" th:href="@{/css/settings.css}"/>
</head>
<body>
<div layout:fragment="content">

    <div class="settings-header">
        <h1 th:text="#{settings.title}">Settings</h1>
        <p th:text="#{settings.subtitle}">Configure your app preferences.</p>
    </div>

    <div class="settings-section">
        <div class="settings-section-title" th:text="#{settings.appearance}">Appearance</div>
        <div class="settings-card">
            <div class="settings-item">
                <div class="settings-item-info">
                    <span class="settings-item-label" th:text="#{settings.light_mode}">Light Mode</span>
                    <span class="settings-item-desc" th:text="#{settings.light_mode_desc}">Switch to the light theme.</span>
                </div>
                <div class="theme-control">
                    <span class="theme-label" id="themeLabel">Dark</span>
                    <label class="toggle-switch">
                        <input type="checkbox" data-theme-toggle onclick="FolioTheme.toggle()"/>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

</div>

<script th:inline="javascript">
    var THEME_LABELS = {
        dark: /*[[#{settings.theme_dark}]]*/ 'Dark',
        light: /*[[#{settings.theme_light}]]*/ 'Light'
    };

    document.addEventListener('DOMContentLoaded', function () {
        function syncUI() {
            var theme = FolioTheme.get();
            var label = document.getElementById('themeLabel');
            if (label) label.textContent = THEME_LABELS[theme] || theme;
        }
        syncUI();

        var toggle = document.querySelector('[data-theme-toggle]');
        if (toggle) {
            toggle.addEventListener('change', function () {
                setTimeout(syncUI, 50);
            });
        }
    });
</script>

</body>
</html>
